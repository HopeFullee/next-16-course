## 학습정리

- ### Next 16 Major Patches

  - #### React Compiler Support (stable): Built-in integration for automatic memoization

    ```
    쉽게 말해서 useMemo, useCallback 훅 사용 없이도 빌드타임때 자동으로 Re-render가 불필요한 컴포넌트를 알아서 적용한다. (개꿀)
    ```

    적용법

    ```js
    // terminal
    npm install babel-plugin-react-compiler@latest
    ```

    ```js
    // next.config.ts
    const nextConfig: NextConfig = {
      reactCompiler: true,
    };
    ```

- ### Routing

  - #### Server-Side Dynamic Routing

    ```js
    interface Props {
      params: Promise<{
        id: string,
      }>;
    }

    // server-side에서 params를 받아오기 때문에 async/await 적용.
    const UserDetails = async ({ params }: Props) => {
      const { id } = await params;

      return (
        <div>
          <h1>Showing details for user #{id}</h1>
        </div>
      );
    };

    export default UserDetails;
    ```

  - #### Client-Side Dynamic Routing

    ```js
    // "React-router-dom"의 "useParams"와 비슷함.
    // 단지 "Next"의 "useParams"는 별도의 npm 설치 없이 built-in으로 제공함.
    import { useParams } from "next/navigation";
    const { id } = useParams;
    ```

  - #### Route Groups

    ```
    Next.js 라우트 그룹은 URL 경로에 영향을 주지 않고 프로젝트 파일을 논리적으로 구성할 수 있게 해주는 기능입니다. 폴더 이름을 괄호 ()로 묶는 방식으로 라우트 그룹을 생성할 수 있으며, 이는 app/ 디렉토리에서 라우트를 구성하고 파일들을 그룹화하지만 URL 구조는 변경하지 않아 코드를 더 깔끔하고 유지보수하기 좋게 만듭니다.
    ```

    Route Groups 사용 안했을때 예시)

    ```
    페이지 "A" 와 "B"가 있고, 각각의 페이지는 별도의 "Layout" 디자인을 가지고 있다고 가정하자.
    Route Group을 활용하지 안는다면, Layout 컴포넌트는 상당히 더러워 질것이다.

    더러운 예)
    if (pathname === "A") return <LayoutA>
    if (pathname === "B") return <LayoutB>

    당장은 2가지의 경우이기에 큰 차이가 보이지 않으나, 만약 별도의 "Layout" 디자인이 2개 이상일 경우
    Layout.tsx 파일 내부는 매우 보기 불편한 상태가 되어있을 것이다.
    ```

    Route Groups 사용 했을때 예시)

    ```
    각각의 경로 "A", "B"의 이름을 ()괄호 속에 작성하여 폴더 생성.
    폴더명 예) (A), (B)

    각각 ()괄호 폴더는 하나의 "Route Group"임으로 별도의 (전용?) app 폴더라고 생각하면 이해가 쉽다.
    `/app` 경로에서도 최종 Layout이 있듯이 각각의 "Route Group"은 해당 그룹의 전용 Layout 파일을 가질 수 있다.
    또한, 모든 "Group"의 Layout 파일은 해당 그룹 폴더 최상단에 존재해야한다.

    이렇게 별도의 경로를 묶음으로써 각자의 전용 "Layout"을 가질 수 있다.
    하지만, 가능하다면 디자이너를 설득하자.. "레이아웃 하나만 가면 안될까요 ㅠㅠ"
    ```
